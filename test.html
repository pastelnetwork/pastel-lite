<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test</title>
    <script type="text/javascript" src="libpastel_wasm.js"></script>
    <script>
        Module.onRuntimeInitialized = function() {
            document.getElementById("callGetLegacyAddress").addEventListener("click", function() {
                let pastelInstance = new Module.Pastel();
                console.log(pastelInstance)

                let selectedMode = document.getElementById("networkMode").value;
                console.log(selectedMode)
                console.log(Module.NetworkMode)
                let mode = Module.NetworkMode[selectedMode];
                console.log(mode)

                let address = pastelInstance.GetNewAddress(mode);
                document.getElementById("legacyAddress").innerText = address;

                pastelInstance.delete();
            });
            document.getElementById("makeNewWallet").addEventListener("click", function() {
                let pastelInstance = new Module.Pastel();
                console.log(pastelInstance)

                let selectedMode = document.getElementById("networkMode").value;
                console.log(selectedMode)
                console.log(Module.NetworkMode)
                let mode = Module.NetworkMode[selectedMode];
                console.log(mode)

                const passwordField = document.getElementById('password-field');
                const password = passwordField.value;
                let mnemonic = pastelInstance.CreateNewWallet(mode, password);
                document.getElementById("mnemonic").innerText = mnemonic;

                pastelInstance.delete();
            });
        };
    </script>
</head>
<body>
<select id="networkMode">
    <option value="Mainnet">Mainnet</option>
    <option value="Testnet">Testnet</option>
</select>
<button id="callGetLegacyAddress">Get New Address</button>
<div id="legacyAddress"></div><br/>
<input type="password" id="password-field" placeholder="Enter your password" />
<button id="makeNewWallet">Make New Wallet</button>
<div id="mnemonic"></div>
</body>
</html>
